{% extends "debate/base.html" %}
{% load markdownify %}
{% load widget_tweaks %}

{% block title %}New Debate{% endblock %}
{% load staticfiles %}

{% block content %}

        <div class="row">


          <div class="col m7 offset-m2">
            <div class="card-panel">
              <h5>Post a topic for debate</h5>

                <form class="" enctype="multipart/form-data" action="." method="post">
                  {% csrf_token %}
                  <label for="{{ form.debate_category.auto_id }}">{{form.debate_category.label_tag}}</label>
                  <div class="row">
                    <div class="col s4">
                      {{ form.debate_category }}
                    </div>
                  </div>

                  {% if form.debate_category.help_text %}
                  <p><small class="grey-text">{{ form.debate_category.help_text }}</small></p>
                  {% endif %}

                    <div class="input-field">
                      {{ form.title|safe}}
                      <label for="{{ form.title.auto_id }}">{{form.title.label_tag}}</label>
                    </div>
                    {% if form.title.help_text %}
                    <p><small class="grey-text">{{ form.title.help_text }}</small></p>
                    {% endif %}
                    <!-- Text Editor -->
                    <div class="row">

                    <div class="collection">
                      {% include "button_click.html" %}
                      {{ form.summary|attr:"class:materialize-textarea"}}
                    </div>
                  </div>
                    <label for="{{ form.summary.auto_id }}">{{form.summary.label_tag}}</label>
                    {% if form.summary.help_text %}
                    <p><small class="grey-text">{{ form.summary.help_text|markdownify }}</small></p>
                    {% endif %}

                    <div class="input-field">
                      {{ form.tags}}
                      <label for="{{ form.tags.auto_id }}">{{form.tags.label_tag}}e.g. Music, Culture, Politics e.t.c.</label>
                    </div>
                    {% if form.tags.help_text %}
                    <p><small class="grey-text">{{ form.tags.help_text|markdownify }}</small></p>
                    {% endif %}

                    <div class="file-field input-field">
                      <div class="blue btn">
                        <span>Image</span>
                        <input type="file" accept="image/*" id="id_image" name="image">
                      </div>
                      <div class="file-path-wrapper">
                        <input class="file-path validate" type="text">
                      </div>
                    </div>


                  {% if post_id %}
                  <div class="row">
                    <button type="submit" class="btn">Update Debate</button>
                    OR <span><a href={% url "debate:debate_detail" post_id=post_id category=None post_slug=None  %}>Return to debate</a>
                  </div>
                  {% else %}
                  <p>
                    <input type="checkbox" id="verified" required />
                    <label for="verified">I have read the <a href="{% url 'debate:rules_guidelines' %}">terms of posting debates</a> and willing to abide.</label>
                  </p><br>

                  <div class="row">
                    <button type="submit" class="yellow btn black-text">Add Debate</button>
                    OR <span><a href={% url "debate:debate_list" %}>Return to home</a>
                  </div>
                  {% endif %}

            </form>
            {{ form.media }}
        </div><!-- End of card -->


      </div>

        </div>

{% endblock %}
